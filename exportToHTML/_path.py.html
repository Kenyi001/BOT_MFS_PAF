<html>
<head>
<title>_path.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #7a7e85;}
.s5 { color: #5f826b; font-style: italic;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
_path.py</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">__future__ </span><span class="s0">import </span><span class="s1">annotations</span>

<span class="s0">import </span><span class="s1">inspect</span>
<span class="s0">import </span><span class="s1">os</span>
<span class="s0">import </span><span class="s1">pathlib</span>
<span class="s0">import </span><span class="s1">sys</span>
<span class="s0">import </span><span class="s1">types</span>
<span class="s0">from </span><span class="s1">collections</span><span class="s2">.</span><span class="s1">abc </span><span class="s0">import </span><span class="s1">Awaitable</span><span class="s2">, </span><span class="s1">Callable</span><span class="s2">, </span><span class="s1">Iterable</span><span class="s2">, </span><span class="s1">Sequence</span>
<span class="s0">from </span><span class="s1">functools </span><span class="s0">import </span><span class="s1">partial</span>
<span class="s0">from </span><span class="s1">io </span><span class="s0">import </span><span class="s1">BufferedRandom</span><span class="s2">, </span><span class="s1">BufferedReader</span><span class="s2">, </span><span class="s1">BufferedWriter</span><span class="s2">, </span><span class="s1">FileIO</span><span class="s2">, </span><span class="s1">TextIOWrapper</span>
<span class="s0">from </span><span class="s1">typing </span><span class="s0">import </span><span class="s2">(</span>
    <span class="s1">IO</span><span class="s2">,</span>
    <span class="s1">TYPE_CHECKING</span><span class="s2">,</span>
    <span class="s1">Any</span><span class="s2">,</span>
    <span class="s1">BinaryIO</span><span class="s2">,</span>
    <span class="s1">ClassVar</span><span class="s2">,</span>
    <span class="s1">TypeVar</span><span class="s2">,</span>
    <span class="s1">Union</span><span class="s2">,</span>
    <span class="s1">cast</span><span class="s2">,</span>
    <span class="s1">overload</span><span class="s2">,</span>
<span class="s2">)</span>

<span class="s0">import </span><span class="s1">trio</span>
<span class="s0">from </span><span class="s1">trio</span><span class="s2">.</span><span class="s1">_file_io </span><span class="s0">import </span><span class="s1">AsyncIOWrapper </span><span class="s0">as </span><span class="s1">_AsyncIOWrapper</span>
<span class="s0">from </span><span class="s1">trio</span><span class="s2">.</span><span class="s1">_util </span><span class="s0">import </span><span class="s1">async_wraps</span><span class="s2">, </span><span class="s1">final</span><span class="s2">, </span><span class="s1">wraps</span>

<span class="s0">if </span><span class="s1">TYPE_CHECKING</span><span class="s2">:</span>
    <span class="s0">from </span><span class="s1">_typeshed </span><span class="s0">import </span><span class="s2">(</span>
        <span class="s1">OpenBinaryMode</span><span class="s2">,</span>
        <span class="s1">OpenBinaryModeReading</span><span class="s2">,</span>
        <span class="s1">OpenBinaryModeUpdating</span><span class="s2">,</span>
        <span class="s1">OpenBinaryModeWriting</span><span class="s2">,</span>
        <span class="s1">OpenTextMode</span><span class="s2">,</span>
    <span class="s2">)</span>
    <span class="s0">from </span><span class="s1">typing_extensions </span><span class="s0">import </span><span class="s1">Concatenate</span><span class="s2">, </span><span class="s1">Literal</span><span class="s2">, </span><span class="s1">ParamSpec</span><span class="s2">, </span><span class="s1">TypeAlias</span>

    <span class="s1">P </span><span class="s2">= </span><span class="s1">ParamSpec</span><span class="s2">(</span><span class="s3">&quot;P&quot;</span><span class="s2">)</span>

<span class="s1">T </span><span class="s2">= </span><span class="s1">TypeVar</span><span class="s2">(</span><span class="s3">&quot;T&quot;</span><span class="s2">)</span>
<span class="s1">StrPath</span><span class="s2">: </span><span class="s1">TypeAlias </span><span class="s2">= </span><span class="s1">Union</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s3">&quot;os.PathLike[str]&quot;</span><span class="s2">]  </span><span class="s4"># Only subscriptable in 3.9+</span>


<span class="s4"># re-wrap return value from methods that return new instances of pathlib.Path</span>
<span class="s0">def </span><span class="s1">rewrap_path</span><span class="s2">(</span><span class="s1">value</span><span class="s2">: </span><span class="s1">T</span><span class="s2">) </span><span class="s1">-&gt; T </span><span class="s2">| </span><span class="s1">Path</span><span class="s2">:</span>
    <span class="s0">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">Path</span><span class="s2">):</span>
        <span class="s0">return </span><span class="s1">Path</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>
    <span class="s0">else</span><span class="s2">:</span>
        <span class="s0">return </span><span class="s1">value</span>


<span class="s0">def </span><span class="s1">_forward_factory</span><span class="s2">(</span>
    <span class="s1">cls</span><span class="s2">: </span><span class="s1">AsyncAutoWrapperType</span><span class="s2">,</span>
    <span class="s1">attr_name</span><span class="s2">: </span><span class="s1">str</span><span class="s2">,</span>
    <span class="s1">attr</span><span class="s2">: </span><span class="s1">Callable</span><span class="s2">[</span><span class="s1">Concatenate</span><span class="s2">[</span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">Path</span><span class="s2">, </span><span class="s1">P</span><span class="s2">], </span><span class="s1">T</span><span class="s2">],</span>
<span class="s2">) </span><span class="s1">-&gt; Callable</span><span class="s2">[</span><span class="s1">Concatenate</span><span class="s2">[</span><span class="s1">Path</span><span class="s2">, </span><span class="s1">P</span><span class="s2">], </span><span class="s1">T </span><span class="s2">| </span><span class="s1">Path</span><span class="s2">]:</span>
    <span class="s2">@</span><span class="s1">wraps</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">)</span>
    <span class="s0">def </span><span class="s1">wrapper</span><span class="s2">(</span><span class="s1">self</span><span class="s2">: </span><span class="s1">Path</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">: </span><span class="s1">P</span><span class="s2">.</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">: </span><span class="s1">P</span><span class="s2">.</span><span class="s1">kwargs</span><span class="s2">) </span><span class="s1">-&gt; T </span><span class="s2">| </span><span class="s1">Path</span><span class="s2">:</span>
        <span class="s1">attr </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_wrapped</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">)</span>
        <span class="s1">value </span><span class="s2">= </span><span class="s1">attr</span><span class="s2">(*</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">rewrap_path</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>

    <span class="s4"># Assigning this makes inspect and therefore Sphinx show the original parameters.</span>
    <span class="s4"># It's not defined on functions normally though, this is a custom attribute.</span>
    <span class="s0">assert </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">wrapper</span><span class="s2">, </span><span class="s1">types</span><span class="s2">.</span><span class="s1">FunctionType</span><span class="s2">)</span>
    <span class="s1">wrapper</span><span class="s2">.</span><span class="s1">__signature__ </span><span class="s2">= </span><span class="s1">inspect</span><span class="s2">.</span><span class="s1">signature</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">)</span>

    <span class="s0">return </span><span class="s1">wrapper</span>


<span class="s0">def </span><span class="s1">_forward_magic</span><span class="s2">(</span>
    <span class="s1">cls</span><span class="s2">: </span><span class="s1">AsyncAutoWrapperType</span><span class="s2">, </span><span class="s1">attr</span><span class="s2">: </span><span class="s1">Callable</span><span class="s2">[..., </span><span class="s1">T</span><span class="s2">]</span>
<span class="s2">) </span><span class="s1">-&gt; Callable</span><span class="s2">[..., </span><span class="s1">Path </span><span class="s2">| </span><span class="s1">T</span><span class="s2">]:</span>
    <span class="s1">sentinel </span><span class="s2">= </span><span class="s1">object</span><span class="s2">()</span>

    <span class="s2">@</span><span class="s1">wraps</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">)</span>
    <span class="s0">def </span><span class="s1">wrapper</span><span class="s2">(</span><span class="s1">self</span><span class="s2">: </span><span class="s1">Path</span><span class="s2">, </span><span class="s1">other</span><span class="s2">: </span><span class="s1">object </span><span class="s2">= </span><span class="s1">sentinel</span><span class="s2">) </span><span class="s1">-&gt; Path </span><span class="s2">| </span><span class="s1">T</span><span class="s2">:</span>
        <span class="s0">if </span><span class="s1">other </span><span class="s0">is </span><span class="s1">sentinel</span><span class="s2">:</span>
            <span class="s0">return </span><span class="s1">attr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_wrapped</span><span class="s2">)</span>
        <span class="s0">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">other</span><span class="s2">, </span><span class="s1">cls</span><span class="s2">):</span>
            <span class="s1">other </span><span class="s2">= </span><span class="s1">cast</span><span class="s2">(</span><span class="s1">Path</span><span class="s2">, </span><span class="s1">other</span><span class="s2">).</span><span class="s1">_wrapped</span>
        <span class="s1">value </span><span class="s2">= </span><span class="s1">attr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_wrapped</span><span class="s2">, </span><span class="s1">other</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">rewrap_path</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>

    <span class="s0">assert </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">wrapper</span><span class="s2">, </span><span class="s1">types</span><span class="s2">.</span><span class="s1">FunctionType</span><span class="s2">)</span>
    <span class="s1">wrapper</span><span class="s2">.</span><span class="s1">__signature__ </span><span class="s2">= </span><span class="s1">inspect</span><span class="s2">.</span><span class="s1">signature</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">)</span>
    <span class="s0">return </span><span class="s1">wrapper</span>


<span class="s0">def </span><span class="s1">iter_wrapper_factory</span><span class="s2">(</span>
    <span class="s1">cls</span><span class="s2">: </span><span class="s1">AsyncAutoWrapperType</span><span class="s2">, </span><span class="s1">meth_name</span><span class="s2">: </span><span class="s1">str</span>
<span class="s2">) </span><span class="s1">-&gt; Callable</span><span class="s2">[</span><span class="s1">Concatenate</span><span class="s2">[</span><span class="s1">Path</span><span class="s2">, </span><span class="s1">P</span><span class="s2">], </span><span class="s1">Awaitable</span><span class="s2">[</span><span class="s1">Iterable</span><span class="s2">[</span><span class="s1">Path</span><span class="s2">]]]:</span>
    <span class="s2">@</span><span class="s1">async_wraps</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_wraps</span><span class="s2">, </span><span class="s1">meth_name</span><span class="s2">)</span>
    <span class="s0">async def </span><span class="s1">wrapper</span><span class="s2">(</span><span class="s1">self</span><span class="s2">: </span><span class="s1">Path</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">: </span><span class="s1">P</span><span class="s2">.</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">: </span><span class="s1">P</span><span class="s2">.</span><span class="s1">kwargs</span><span class="s2">) </span><span class="s1">-&gt; Iterable</span><span class="s2">[</span><span class="s1">Path</span><span class="s2">]:</span>
        <span class="s1">meth </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_wrapped</span><span class="s2">, </span><span class="s1">meth_name</span><span class="s2">)</span>
        <span class="s1">func </span><span class="s2">= </span><span class="s1">partial</span><span class="s2">(</span><span class="s1">meth</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">)</span>
        <span class="s4"># Make sure that the full iteration is performed in the thread</span>
        <span class="s4"># by converting the generator produced by pathlib into a list</span>
        <span class="s1">items </span><span class="s2">= </span><span class="s0">await </span><span class="s1">trio</span><span class="s2">.</span><span class="s1">to_thread</span><span class="s2">.</span><span class="s1">run_sync</span><span class="s2">(</span><span class="s0">lambda</span><span class="s2">: </span><span class="s1">list</span><span class="s2">(</span><span class="s1">func</span><span class="s2">()))</span>
        <span class="s0">return </span><span class="s2">(</span><span class="s1">rewrap_path</span><span class="s2">(</span><span class="s1">item</span><span class="s2">) </span><span class="s0">for </span><span class="s1">item </span><span class="s0">in </span><span class="s1">items</span><span class="s2">)</span>

    <span class="s0">return </span><span class="s1">wrapper</span>


<span class="s0">def </span><span class="s1">thread_wrapper_factory</span><span class="s2">(</span>
    <span class="s1">cls</span><span class="s2">: </span><span class="s1">AsyncAutoWrapperType</span><span class="s2">, </span><span class="s1">meth_name</span><span class="s2">: </span><span class="s1">str</span>
<span class="s2">) </span><span class="s1">-&gt; Callable</span><span class="s2">[</span><span class="s1">Concatenate</span><span class="s2">[</span><span class="s1">Path</span><span class="s2">, </span><span class="s1">P</span><span class="s2">], </span><span class="s1">Awaitable</span><span class="s2">[</span><span class="s1">Path</span><span class="s2">]]:</span>
    <span class="s2">@</span><span class="s1">async_wraps</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_wraps</span><span class="s2">, </span><span class="s1">meth_name</span><span class="s2">)</span>
    <span class="s0">async def </span><span class="s1">wrapper</span><span class="s2">(</span><span class="s1">self</span><span class="s2">: </span><span class="s1">Path</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">: </span><span class="s1">P</span><span class="s2">.</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">: </span><span class="s1">P</span><span class="s2">.</span><span class="s1">kwargs</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">:</span>
        <span class="s1">meth </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_wrapped</span><span class="s2">, </span><span class="s1">meth_name</span><span class="s2">)</span>
        <span class="s1">func </span><span class="s2">= </span><span class="s1">partial</span><span class="s2">(</span><span class="s1">meth</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">)</span>
        <span class="s1">value </span><span class="s2">= </span><span class="s0">await </span><span class="s1">trio</span><span class="s2">.</span><span class="s1">to_thread</span><span class="s2">.</span><span class="s1">run_sync</span><span class="s2">(</span><span class="s1">func</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">rewrap_path</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>

    <span class="s0">return </span><span class="s1">wrapper</span>


<span class="s0">def </span><span class="s1">classmethod_wrapper_factory</span><span class="s2">(</span>
    <span class="s1">cls</span><span class="s2">: </span><span class="s1">AsyncAutoWrapperType</span><span class="s2">, </span><span class="s1">meth_name</span><span class="s2">: </span><span class="s1">str</span>
<span class="s2">) </span><span class="s1">-&gt; classmethod</span><span class="s2">:  </span><span class="s4"># type: ignore[type-arg]</span>
    <span class="s2">@</span><span class="s1">async_wraps</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_wraps</span><span class="s2">, </span><span class="s1">meth_name</span><span class="s2">)</span>
    <span class="s0">async def </span><span class="s1">wrapper</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">: </span><span class="s1">type</span><span class="s2">[</span><span class="s1">Path</span><span class="s2">], *</span><span class="s1">args</span><span class="s2">: </span><span class="s1">Any</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">: </span><span class="s1">Any</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">:  </span><span class="s4"># type: ignore[misc] # contains Any</span>
        <span class="s1">meth </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_wraps</span><span class="s2">, </span><span class="s1">meth_name</span><span class="s2">)</span>
        <span class="s1">func </span><span class="s2">= </span><span class="s1">partial</span><span class="s2">(</span><span class="s1">meth</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">)</span>
        <span class="s1">value </span><span class="s2">= </span><span class="s0">await </span><span class="s1">trio</span><span class="s2">.</span><span class="s1">to_thread</span><span class="s2">.</span><span class="s1">run_sync</span><span class="s2">(</span><span class="s1">func</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">rewrap_path</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>

    <span class="s0">assert </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">wrapper</span><span class="s2">, </span><span class="s1">types</span><span class="s2">.</span><span class="s1">FunctionType</span><span class="s2">)</span>
    <span class="s1">wrapper</span><span class="s2">.</span><span class="s1">__signature__ </span><span class="s2">= </span><span class="s1">inspect</span><span class="s2">.</span><span class="s1">signature</span><span class="s2">(</span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_wraps</span><span class="s2">, </span><span class="s1">meth_name</span><span class="s2">))</span>
    <span class="s0">return </span><span class="s1">classmethod</span><span class="s2">(</span><span class="s1">wrapper</span><span class="s2">)</span>


<span class="s0">class </span><span class="s1">AsyncAutoWrapperType</span><span class="s2">(</span><span class="s1">type</span><span class="s2">):</span>
    <span class="s1">_forwards</span><span class="s2">: </span><span class="s1">type</span>
    <span class="s1">_wraps</span><span class="s2">: </span><span class="s1">type</span>
    <span class="s1">_forward_magic</span><span class="s2">: </span><span class="s1">list</span><span class="s2">[</span><span class="s1">str</span><span class="s2">]</span>
    <span class="s1">_wrap_iter</span><span class="s2">: </span><span class="s1">list</span><span class="s2">[</span><span class="s1">str</span><span class="s2">]</span>
    <span class="s1">_forward</span><span class="s2">: </span><span class="s1">list</span><span class="s2">[</span><span class="s1">str</span><span class="s2">]</span>

    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span>
        <span class="s1">cls</span><span class="s2">, </span><span class="s1">name</span><span class="s2">: </span><span class="s1">str</span><span class="s2">, </span><span class="s1">bases</span><span class="s2">: </span><span class="s1">tuple</span><span class="s2">[</span><span class="s1">type</span><span class="s2">, ...], </span><span class="s1">attrs</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">object</span><span class="s2">]</span>
    <span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s1">super</span><span class="s2">().</span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">name</span><span class="s2">, </span><span class="s1">bases</span><span class="s2">, </span><span class="s1">attrs</span><span class="s2">)</span>

        <span class="s1">cls</span><span class="s2">.</span><span class="s1">_forward </span><span class="s2">= []</span>
        <span class="s1">type</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">).</span><span class="s1">generate_forwards</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attrs</span><span class="s2">)</span>
        <span class="s1">type</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">).</span><span class="s1">generate_wraps</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attrs</span><span class="s2">)</span>
        <span class="s1">type</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">).</span><span class="s1">generate_magic</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attrs</span><span class="s2">)</span>
        <span class="s1">type</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">).</span><span class="s1">generate_iter</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attrs</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">generate_forwards</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attrs</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">object</span><span class="s2">]) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s4"># forward functions of _forwards</span>
        <span class="s0">for </span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">attr </span><span class="s0">in </span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_forwards</span><span class="s2">.</span><span class="s1">__dict__</span><span class="s2">.</span><span class="s1">items</span><span class="s2">():</span>
            <span class="s0">if </span><span class="s1">attr_name</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">&quot;_&quot;</span><span class="s2">) </span><span class="s0">or </span><span class="s1">attr_name </span><span class="s0">in </span><span class="s1">attrs</span><span class="s2">:</span>
                <span class="s0">continue</span>

            <span class="s0">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">, </span><span class="s1">property</span><span class="s2">):</span>
                <span class="s1">cls</span><span class="s2">.</span><span class="s1">_forward</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s1">attr_name</span><span class="s2">)</span>
            <span class="s0">elif </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">, </span><span class="s1">types</span><span class="s2">.</span><span class="s1">FunctionType</span><span class="s2">):</span>
                <span class="s1">wrapper </span><span class="s2">= </span><span class="s1">_forward_factory</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">attr</span><span class="s2">)</span>
                <span class="s1">setattr</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">wrapper</span><span class="s2">)</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s0">raise </span><span class="s1">TypeError</span><span class="s2">(</span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">type</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">generate_wraps</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attrs</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">object</span><span class="s2">]) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s4"># generate wrappers for functions of _wraps</span>
        <span class="s1">wrapper</span><span class="s2">: </span><span class="s1">classmethod </span><span class="s2">| </span><span class="s1">Callable</span><span class="s2">[..., </span><span class="s1">object</span><span class="s2">]  </span><span class="s4"># type: ignore[type-arg]</span>
        <span class="s0">for </span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">attr </span><span class="s0">in </span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_wraps</span><span class="s2">.</span><span class="s1">__dict__</span><span class="s2">.</span><span class="s1">items</span><span class="s2">():</span>
            <span class="s4"># .z. exclude cls._wrap_iter</span>
            <span class="s0">if </span><span class="s1">attr_name</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">&quot;_&quot;</span><span class="s2">) </span><span class="s0">or </span><span class="s1">attr_name </span><span class="s0">in </span><span class="s1">attrs</span><span class="s2">:</span>
                <span class="s0">continue</span>
            <span class="s0">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">, </span><span class="s1">classmethod</span><span class="s2">):</span>
                <span class="s1">wrapper </span><span class="s2">= </span><span class="s1">classmethod_wrapper_factory</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">)</span>
                <span class="s1">setattr</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">wrapper</span><span class="s2">)</span>
            <span class="s0">elif </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">, </span><span class="s1">types</span><span class="s2">.</span><span class="s1">FunctionType</span><span class="s2">):</span>
                <span class="s1">wrapper </span><span class="s2">= </span><span class="s1">thread_wrapper_factory</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">)</span>
                <span class="s0">assert </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">wrapper</span><span class="s2">, </span><span class="s1">types</span><span class="s2">.</span><span class="s1">FunctionType</span><span class="s2">)</span>
                <span class="s1">wrapper</span><span class="s2">.</span><span class="s1">__signature__ </span><span class="s2">= </span><span class="s1">inspect</span><span class="s2">.</span><span class="s1">signature</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">)</span>
                <span class="s1">setattr</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">wrapper</span><span class="s2">)</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s0">raise </span><span class="s1">TypeError</span><span class="s2">(</span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">type</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">generate_magic</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attrs</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">object</span><span class="s2">]) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s4"># generate wrappers for magic</span>
        <span class="s0">for </span><span class="s1">attr_name </span><span class="s0">in </span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_forward_magic</span><span class="s2">:</span>
            <span class="s1">attr </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_forwards</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">)</span>
            <span class="s1">wrapper </span><span class="s2">= </span><span class="s1">_forward_magic</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attr</span><span class="s2">)</span>
            <span class="s1">setattr</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">wrapper</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">generate_iter</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attrs</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">object</span><span class="s2">]) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s4"># generate wrappers for methods that return iterators</span>
        <span class="s1">wrapper</span><span class="s2">: </span><span class="s1">Callable</span><span class="s2">[..., </span><span class="s1">object</span><span class="s2">]</span>
        <span class="s0">for </span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">attr </span><span class="s0">in </span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_wraps</span><span class="s2">.</span><span class="s1">__dict__</span><span class="s2">.</span><span class="s1">items</span><span class="s2">():</span>
            <span class="s0">if </span><span class="s1">attr_name </span><span class="s0">in </span><span class="s1">cls</span><span class="s2">.</span><span class="s1">_wrap_iter</span><span class="s2">:</span>
                <span class="s1">wrapper </span><span class="s2">= </span><span class="s1">iter_wrapper_factory</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">)</span>
                <span class="s0">assert </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">wrapper</span><span class="s2">, </span><span class="s1">types</span><span class="s2">.</span><span class="s1">FunctionType</span><span class="s2">)</span>
                <span class="s1">wrapper</span><span class="s2">.</span><span class="s1">__signature__ </span><span class="s2">= </span><span class="s1">inspect</span><span class="s2">.</span><span class="s1">signature</span><span class="s2">(</span><span class="s1">attr</span><span class="s2">)</span>
                <span class="s1">setattr</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">attr_name</span><span class="s2">, </span><span class="s1">wrapper</span><span class="s2">)</span>


<span class="s2">@</span><span class="s1">final</span>
<span class="s0">class </span><span class="s1">Path</span><span class="s2">(</span><span class="s1">metaclass</span><span class="s2">=</span><span class="s1">AsyncAutoWrapperType</span><span class="s2">):</span>
    <span class="s5">&quot;&quot;&quot;A :class:`pathlib.Path` wrapper that executes blocking methods in 
    :meth:`trio.to_thread.run_sync`. 
 
    &quot;&quot;&quot;</span>

    <span class="s1">_forward</span><span class="s2">: </span><span class="s1">ClassVar</span><span class="s2">[</span><span class="s1">list</span><span class="s2">[</span><span class="s1">str</span><span class="s2">]]</span>
    <span class="s1">_wraps</span><span class="s2">: </span><span class="s1">ClassVar</span><span class="s2">[</span><span class="s1">type</span><span class="s2">] = </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">Path</span>
    <span class="s1">_forwards</span><span class="s2">: </span><span class="s1">ClassVar</span><span class="s2">[</span><span class="s1">type</span><span class="s2">] = </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">PurePath</span>
    <span class="s1">_forward_magic</span><span class="s2">: </span><span class="s1">ClassVar</span><span class="s2">[</span><span class="s1">list</span><span class="s2">[</span><span class="s1">str</span><span class="s2">]] = [</span>
        <span class="s3">&quot;__str__&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;__bytes__&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;__truediv__&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;__rtruediv__&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;__eq__&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;__lt__&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;__le__&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;__gt__&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;__ge__&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;__hash__&quot;</span><span class="s2">,</span>
    <span class="s2">]</span>
    <span class="s1">_wrap_iter</span><span class="s2">: </span><span class="s1">ClassVar</span><span class="s2">[</span><span class="s1">list</span><span class="s2">[</span><span class="s1">str</span><span class="s2">]] = [</span><span class="s3">&quot;glob&quot;</span><span class="s2">, </span><span class="s3">&quot;rglob&quot;</span><span class="s2">, </span><span class="s3">&quot;iterdir&quot;</span><span class="s2">]</span>

    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">: </span><span class="s1">StrPath</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_wrapped </span><span class="s2">= </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">Path</span><span class="s2">(*</span><span class="s1">args</span><span class="s2">)</span>

    <span class="s4"># type checkers allow accessing any attributes on class instances with `__getattr__`</span>
    <span class="s4"># so we hide it behind a type guard forcing it to rely on the hardcoded attribute</span>
    <span class="s4"># list below.</span>
    <span class="s0">if not </span><span class="s1">TYPE_CHECKING</span><span class="s2">:</span>

        <span class="s0">def </span><span class="s1">__getattr__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">name</span><span class="s2">):</span>
            <span class="s0">if </span><span class="s1">name </span><span class="s0">in </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_forward</span><span class="s2">:</span>
                <span class="s1">value </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_wrapped</span><span class="s2">, </span><span class="s1">name</span><span class="s2">)</span>
                <span class="s0">return </span><span class="s1">rewrap_path</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>
            <span class="s0">raise </span><span class="s1">AttributeError</span><span class="s2">(</span><span class="s1">name</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">__dir__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; list</span><span class="s2">[</span><span class="s1">str</span><span class="s2">]:</span>
        <span class="s0">return </span><span class="s2">[*</span><span class="s1">super</span><span class="s2">().</span><span class="s1">__dir__</span><span class="s2">(), *</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_forward</span><span class="s2">]</span>

    <span class="s0">def </span><span class="s1">__repr__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">:</span>
        <span class="s0">return </span><span class="s3">f&quot;trio.Path(</span><span class="s0">{</span><span class="s1">str</span><span class="s2">(</span><span class="s1">self</span><span class="s2">)</span><span class="s0">!r}</span><span class="s3">)&quot;</span>

    <span class="s0">def </span><span class="s1">__fspath__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">:</span>
        <span class="s0">return </span><span class="s1">os</span><span class="s2">.</span><span class="s1">fspath</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_wrapped</span><span class="s2">)</span>

    <span class="s2">@</span><span class="s1">overload</span>
    <span class="s0">async def </span><span class="s1">open</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">mode</span><span class="s2">: </span><span class="s1">OpenTextMode </span><span class="s2">= </span><span class="s3">&quot;r&quot;</span><span class="s2">,</span>
        <span class="s1">buffering</span><span class="s2">: </span><span class="s1">int </span><span class="s2">= -</span><span class="s6">1</span><span class="s2">,</span>
        <span class="s1">encoding</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">errors</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">newline</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; _AsyncIOWrapper</span><span class="s2">[</span><span class="s1">TextIOWrapper</span><span class="s2">]:</span>
        <span class="s2">...</span>

    <span class="s2">@</span><span class="s1">overload</span>
    <span class="s0">async def </span><span class="s1">open</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">mode</span><span class="s2">: </span><span class="s1">OpenBinaryMode</span><span class="s2">,</span>
        <span class="s1">buffering</span><span class="s2">: </span><span class="s1">Literal</span><span class="s2">[</span><span class="s6">0</span><span class="s2">],</span>
        <span class="s1">encoding</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">errors</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">newline</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; _AsyncIOWrapper</span><span class="s2">[</span><span class="s1">FileIO</span><span class="s2">]:</span>
        <span class="s2">...</span>

    <span class="s2">@</span><span class="s1">overload</span>
    <span class="s0">async def </span><span class="s1">open</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">mode</span><span class="s2">: </span><span class="s1">OpenBinaryModeUpdating</span><span class="s2">,</span>
        <span class="s1">buffering</span><span class="s2">: </span><span class="s1">Literal</span><span class="s2">[-</span><span class="s6">1</span><span class="s2">, </span><span class="s6">1</span><span class="s2">] = -</span><span class="s6">1</span><span class="s2">,</span>
        <span class="s1">encoding</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">errors</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">newline</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; _AsyncIOWrapper</span><span class="s2">[</span><span class="s1">BufferedRandom</span><span class="s2">]:</span>
        <span class="s2">...</span>

    <span class="s2">@</span><span class="s1">overload</span>
    <span class="s0">async def </span><span class="s1">open</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">mode</span><span class="s2">: </span><span class="s1">OpenBinaryModeWriting</span><span class="s2">,</span>
        <span class="s1">buffering</span><span class="s2">: </span><span class="s1">Literal</span><span class="s2">[-</span><span class="s6">1</span><span class="s2">, </span><span class="s6">1</span><span class="s2">] = -</span><span class="s6">1</span><span class="s2">,</span>
        <span class="s1">encoding</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">errors</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">newline</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; _AsyncIOWrapper</span><span class="s2">[</span><span class="s1">BufferedWriter</span><span class="s2">]:</span>
        <span class="s2">...</span>

    <span class="s2">@</span><span class="s1">overload</span>
    <span class="s0">async def </span><span class="s1">open</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">mode</span><span class="s2">: </span><span class="s1">OpenBinaryModeReading</span><span class="s2">,</span>
        <span class="s1">buffering</span><span class="s2">: </span><span class="s1">Literal</span><span class="s2">[-</span><span class="s6">1</span><span class="s2">, </span><span class="s6">1</span><span class="s2">] = -</span><span class="s6">1</span><span class="s2">,</span>
        <span class="s1">encoding</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">errors</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">newline</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; _AsyncIOWrapper</span><span class="s2">[</span><span class="s1">BufferedReader</span><span class="s2">]:</span>
        <span class="s2">...</span>

    <span class="s2">@</span><span class="s1">overload</span>
    <span class="s0">async def </span><span class="s1">open</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">mode</span><span class="s2">: </span><span class="s1">OpenBinaryMode</span><span class="s2">,</span>
        <span class="s1">buffering</span><span class="s2">: </span><span class="s1">int </span><span class="s2">= -</span><span class="s6">1</span><span class="s2">,</span>
        <span class="s1">encoding</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">errors</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">newline</span><span class="s2">: </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; _AsyncIOWrapper</span><span class="s2">[</span><span class="s1">BinaryIO</span><span class="s2">]:</span>
        <span class="s2">...</span>

    <span class="s2">@</span><span class="s1">overload</span>
    <span class="s0">async def </span><span class="s1">open</span><span class="s2">(  </span><span class="s4"># type: ignore[misc]  # Any usage matches builtins.open().</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">mode</span><span class="s2">: </span><span class="s1">str</span><span class="s2">,</span>
        <span class="s1">buffering</span><span class="s2">: </span><span class="s1">int </span><span class="s2">= -</span><span class="s6">1</span><span class="s2">,</span>
        <span class="s1">encoding</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">errors</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">newline</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; _AsyncIOWrapper</span><span class="s2">[</span><span class="s1">IO</span><span class="s2">[</span><span class="s1">Any</span><span class="s2">]]:</span>
        <span class="s2">...</span>

    <span class="s2">@</span><span class="s1">wraps</span><span class="s2">(</span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">Path</span><span class="s2">.</span><span class="s1">open</span><span class="s2">)  </span><span class="s4"># type: ignore[misc]  # Overload return mismatch.</span>
    <span class="s0">async def </span><span class="s1">open</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">: </span><span class="s1">Any</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">: </span><span class="s1">Any</span><span class="s2">) </span><span class="s1">-&gt; _AsyncIOWrapper</span><span class="s2">[</span><span class="s1">IO</span><span class="s2">[</span><span class="s1">Any</span><span class="s2">]]:</span>
        <span class="s5">&quot;&quot;&quot;Open the file pointed to by the path, like the :func:`trio.open_file` 
        function does. 
 
        &quot;&quot;&quot;</span>

        <span class="s1">func </span><span class="s2">= </span><span class="s1">partial</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_wrapped</span><span class="s2">.</span><span class="s1">open</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">)</span>
        <span class="s1">value </span><span class="s2">= </span><span class="s0">await </span><span class="s1">trio</span><span class="s2">.</span><span class="s1">to_thread</span><span class="s2">.</span><span class="s1">run_sync</span><span class="s2">(</span><span class="s1">func</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">trio</span><span class="s2">.</span><span class="s1">wrap_file</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>

    <span class="s0">if </span><span class="s1">TYPE_CHECKING</span><span class="s2">:</span>
        <span class="s4"># the dunders listed in _forward_magic that aren't seen otherwise</span>
        <span class="s4"># fmt: off</span>
        <span class="s0">def </span><span class="s1">__bytes__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bytes</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">__truediv__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">other</span><span class="s2">: </span><span class="s1">StrPath</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">__rtruediv__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">other</span><span class="s2">: </span><span class="s1">StrPath</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">__lt__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">other</span><span class="s2">: </span><span class="s1">Path </span><span class="s2">| </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">PurePath</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">__le__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">other</span><span class="s2">: </span><span class="s1">Path </span><span class="s2">| </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">PurePath</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">__gt__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">other</span><span class="s2">: </span><span class="s1">Path </span><span class="s2">| </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">PurePath</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">__ge__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">other</span><span class="s2">: </span><span class="s1">Path </span><span class="s2">| </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">PurePath</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>

        <span class="s4"># The following are ordered the same as in typeshed.</span>

        <span class="s4"># Properties produced by __getattr__() - all synchronous.</span>
        <span class="s2">@</span><span class="s1">property</span>
        <span class="s0">def </span><span class="s1">parts</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; tuple</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, ...]: ...</span>
        <span class="s2">@</span><span class="s1">property</span>
        <span class="s0">def </span><span class="s1">drive</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
        <span class="s2">@</span><span class="s1">property</span>
        <span class="s0">def </span><span class="s1">root</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
        <span class="s2">@</span><span class="s1">property</span>
        <span class="s0">def </span><span class="s1">anchor</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
        <span class="s2">@</span><span class="s1">property</span>
        <span class="s0">def </span><span class="s1">name</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
        <span class="s2">@</span><span class="s1">property</span>
        <span class="s0">def </span><span class="s1">suffix</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
        <span class="s2">@</span><span class="s1">property</span>
        <span class="s0">def </span><span class="s1">suffixes</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; list</span><span class="s2">[</span><span class="s1">str</span><span class="s2">]: ...</span>
        <span class="s2">@</span><span class="s1">property</span>
        <span class="s0">def </span><span class="s1">stem</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
        <span class="s2">@</span><span class="s1">property</span>
        <span class="s0">def </span><span class="s1">parents</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Sequence</span><span class="s2">[</span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">Path</span><span class="s2">]: ...   </span><span class="s4"># TODO: Convert these to trio Paths?</span>
        <span class="s2">@</span><span class="s1">property</span>
        <span class="s0">def </span><span class="s1">parent</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>

        <span class="s4"># PurePath methods - synchronous.</span>
        <span class="s0">def </span><span class="s1">as_posix</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">as_uri</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">is_absolute</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">is_reserved</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">match</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">path_pattern</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">relative_to</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, *</span><span class="s1">other</span><span class="s2">: </span><span class="s1">StrPath</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">with_name</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">name</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">with_suffix</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">suffix</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">def </span><span class="s1">joinpath</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, *</span><span class="s1">other</span><span class="s2">: </span><span class="s1">StrPath</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>

        <span class="s0">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">version_info </span><span class="s2">&gt;= (</span><span class="s6">3</span><span class="s2">, </span><span class="s6">9</span><span class="s2">):</span>
            <span class="s0">def </span><span class="s1">is_relative_to</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, *</span><span class="s1">other</span><span class="s2">: </span><span class="s1">StrPath</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
            <span class="s0">def </span><span class="s1">with_stem</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">stem</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>

        <span class="s4"># pathlib.Path methods and properties - async.</span>
        <span class="s2">@</span><span class="s1">classmethod</span>
        <span class="s0">async def </span><span class="s1">cwd</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>

        <span class="s0">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">version_info </span><span class="s2">&gt;= (</span><span class="s6">3</span><span class="s2">, </span><span class="s6">10</span><span class="s2">):</span>
            <span class="s0">async def </span><span class="s1">stat</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, *, </span><span class="s1">follow_symlinks</span><span class="s2">: </span><span class="s1">bool </span><span class="s2">= </span><span class="s0">True</span><span class="s2">) </span><span class="s1">-&gt; os</span><span class="s2">.</span><span class="s1">stat_result</span><span class="s2">: ...</span>
            <span class="s0">async def </span><span class="s1">chmod</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">mode</span><span class="s2">: </span><span class="s1">int</span><span class="s2">, *, </span><span class="s1">follow_symlinks</span><span class="s2">: </span><span class="s1">bool </span><span class="s2">= </span><span class="s0">True</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">: ...</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s0">async def </span><span class="s1">stat</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; os</span><span class="s2">.</span><span class="s1">stat_result</span><span class="s2">: ...</span>
            <span class="s0">async def </span><span class="s1">chmod</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">mode</span><span class="s2">: </span><span class="s1">int</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">: ...</span>

        <span class="s0">async def </span><span class="s1">exists</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">glob</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">pattern</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; Iterable</span><span class="s2">[</span><span class="s1">Path</span><span class="s2">]: ...</span>
        <span class="s0">async def </span><span class="s1">is_dir</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">is_file</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">is_symlink</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">is_socket</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">is_fifo</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">is_block_device</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">is_char_device</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">iterdir</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Iterable</span><span class="s2">[</span><span class="s1">Path</span><span class="s2">]: ...</span>
        <span class="s0">async def </span><span class="s1">lchmod</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">mode</span><span class="s2">: </span><span class="s1">int</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">lstat</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; os</span><span class="s2">.</span><span class="s1">stat_result</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">mkdir</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">mode</span><span class="s2">: </span><span class="s1">int </span><span class="s2">= </span><span class="s6">0o777</span><span class="s2">, </span><span class="s1">parents</span><span class="s2">: </span><span class="s1">bool </span><span class="s2">= </span><span class="s0">False</span><span class="s2">, </span><span class="s1">exist_ok</span><span class="s2">: </span><span class="s1">bool </span><span class="s2">= </span><span class="s0">False</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">: ...</span>

        <span class="s0">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">platform </span><span class="s2">!= </span><span class="s3">&quot;win32&quot;</span><span class="s2">:</span>
            <span class="s0">async def </span><span class="s1">owner</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
            <span class="s0">async def </span><span class="s1">group</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
            <span class="s0">async def </span><span class="s1">is_mount</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">version_info </span><span class="s2">&gt;= (</span><span class="s6">3</span><span class="s2">, </span><span class="s6">9</span><span class="s2">):</span>
            <span class="s0">async def </span><span class="s1">readlink</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">rename</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">target</span><span class="s2">: </span><span class="s1">StrPath</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">replace</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">target</span><span class="s2">: </span><span class="s1">StrPath</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">strict</span><span class="s2">: </span><span class="s1">bool </span><span class="s2">= </span><span class="s0">False</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">rglob</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">pattern</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; Iterable</span><span class="s2">[</span><span class="s1">Path</span><span class="s2">]: ...</span>
        <span class="s0">async def </span><span class="s1">rmdir</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">symlink_to</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">target</span><span class="s2">: </span><span class="s1">StrPath</span><span class="s2">, </span><span class="s1">target_is_directory</span><span class="s2">: </span><span class="s1">bool </span><span class="s2">= </span><span class="s0">False</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">: ...</span>
        <span class="s0">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">version_info </span><span class="s2">&gt;= (</span><span class="s6">3</span><span class="s2">, </span><span class="s6">10</span><span class="s2">):</span>
            <span class="s0">async def </span><span class="s1">hardlink_to</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">target</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">Path</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">touch</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">mode</span><span class="s2">: </span><span class="s1">int </span><span class="s2">= </span><span class="s6">0o666</span><span class="s2">, </span><span class="s1">exist_ok</span><span class="s2">: </span><span class="s1">bool </span><span class="s2">= </span><span class="s0">True</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">unlink</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">missing_ok</span><span class="s2">: </span><span class="s1">bool </span><span class="s2">= </span><span class="s0">False</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">: ...</span>
        <span class="s2">@</span><span class="s1">classmethod</span>
        <span class="s0">async def </span><span class="s1">home</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">absolute</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">expanduser</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">read_bytes</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bytes</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">read_text</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">encoding</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">, </span><span class="s1">errors</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">samefile</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">other_path</span><span class="s2">: </span><span class="s1">bytes </span><span class="s2">| </span><span class="s1">int </span><span class="s2">| </span><span class="s1">StrPath</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
        <span class="s0">async def </span><span class="s1">write_bytes</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">data</span><span class="s2">: </span><span class="s1">bytes</span><span class="s2">) </span><span class="s1">-&gt; int</span><span class="s2">: ...</span>

        <span class="s0">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">version_info </span><span class="s2">&gt;= (</span><span class="s6">3</span><span class="s2">, </span><span class="s6">10</span><span class="s2">):</span>
            <span class="s0">async def </span><span class="s1">write_text</span><span class="s2">(</span>
                <span class="s1">self</span><span class="s2">, </span><span class="s1">data</span><span class="s2">: </span><span class="s1">str</span><span class="s2">,</span>
                <span class="s1">encoding</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
                <span class="s1">errors</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
                <span class="s1">newline</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
            <span class="s2">) </span><span class="s1">-&gt; int</span><span class="s2">: ...</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s0">async def </span><span class="s1">write_text</span><span class="s2">(</span>
                <span class="s1">self</span><span class="s2">, </span><span class="s1">data</span><span class="s2">: </span><span class="s1">str</span><span class="s2">,</span>
                <span class="s1">encoding</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
                <span class="s1">errors</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
            <span class="s2">) </span><span class="s1">-&gt; int</span><span class="s2">: ...</span>

        <span class="s0">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">version_info </span><span class="s2">&lt; (</span><span class="s6">3</span><span class="s2">, </span><span class="s6">12</span><span class="s2">):</span>
            <span class="s0">async def </span><span class="s1">link_to</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">target</span><span class="s2">: </span><span class="s1">StrPath </span><span class="s2">| </span><span class="s1">bytes</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">: ...</span>
        <span class="s0">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">version_info </span><span class="s2">&gt;= (</span><span class="s6">3</span><span class="s2">, </span><span class="s6">12</span><span class="s2">):</span>
            <span class="s0">async def </span><span class="s1">is_junction</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">: ...</span>
            <span class="s1">walk</span><span class="s2">: </span><span class="s1">Any  </span><span class="s4"># TODO</span>
            <span class="s0">async def </span><span class="s1">with_segments</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, *</span><span class="s1">pathsegments</span><span class="s2">: </span><span class="s1">StrPath</span><span class="s2">) </span><span class="s1">-&gt; Path</span><span class="s2">: ...</span>


<span class="s1">Path</span><span class="s2">.</span><span class="s1">iterdir</span><span class="s2">.</span><span class="s1">__doc__ </span><span class="s2">= </span><span class="s3">&quot;&quot;&quot; 
    Like :meth:`~pathlib.Path.iterdir`, but async. 
 
    This is an async method that returns a synchronous iterator, so you 
    use it like:: 
 
       for subpath in await mypath.iterdir(): 
           ... 
 
    Note that it actually loads the whole directory list into memory 
    immediately, during the initial call. (See `issue #501 
    &lt;https://github.com/python-trio/trio/issues/501&gt;`__ for discussion.) 
 
&quot;&quot;&quot;</span>

<span class="s0">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">version_info </span><span class="s2">&lt; (</span><span class="s6">3</span><span class="s2">, </span><span class="s6">12</span><span class="s2">):</span>
    <span class="s4"># Since we synthesise methods from the stdlib, this automatically will</span>
    <span class="s4"># have deprecation warnings, and disappear entirely in 3.12+.</span>
    <span class="s1">Path</span><span class="s2">.</span><span class="s1">link_to</span><span class="s2">.</span><span class="s1">__doc__ </span><span class="s2">= </span><span class="s3">&quot;&quot;&quot; 
    Like Python 3.8-3.11's :meth:`~pathlib.Path.link_to`, but async. 
 
    :deprecated: This method was deprecated in Python 3.10 and entirely </span><span class="s0">\ 
    </span><span class="s3">removed in 3.12. Use :meth:`hardlink_to` instead which has </span><span class="s0">\ 
    </span><span class="s3">a more meaningful parameter order. 
&quot;&quot;&quot;</span>

<span class="s4"># The value of Path.absolute.__doc__ makes a reference to</span>
<span class="s4"># :meth:~pathlib.Path.absolute, which does not exist. Removing this makes more</span>
<span class="s4"># sense than inventing our own special docstring for this.</span>
<span class="s0">del </span><span class="s1">Path</span><span class="s2">.</span><span class="s1">absolute</span><span class="s2">.</span><span class="s1">__doc__</span>

<span class="s4"># TODO: This is likely not supported by all the static tools out there, see discussion in</span>
<span class="s4"># https://github.com/python-trio/trio/pull/2631#discussion_r1185612528</span>
<span class="s1">os</span><span class="s2">.</span><span class="s1">PathLike</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">Path</span><span class="s2">)</span>
</pre>
</body>
</html>