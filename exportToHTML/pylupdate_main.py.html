<html>
<head>
<title>pylupdate_main.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
pylupdate_main.py</font>
</center></td></tr></table>
<pre><span class="s0"># Copyright (c) 2023 Riverbank Computing Limited &lt;info@riverbankcomputing.com&gt;</span>
<span class="s0"># </span>
<span class="s0"># This file is part of PyQt5.</span>
<span class="s0"># </span>
<span class="s0"># This file may be used under the terms of the GNU General Public License</span>
<span class="s0"># version 3.0 as published by the Free Software Foundation and appearing in</span>
<span class="s0"># the file LICENSE included in the packaging of this file.  Please review the</span>
<span class="s0"># following information to ensure the GNU General Public License version 3.0</span>
<span class="s0"># requirements will be met: http://www.gnu.org/copyleft/gpl.html.</span>
<span class="s0"># </span>
<span class="s0"># If you do not wish to use this file under the terms of the GPL version 3.0</span>
<span class="s0"># then you may purchase a commercial license.  For more information contact</span>
<span class="s0"># info@riverbankcomputing.com.</span>
<span class="s0"># </span>
<span class="s0"># This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING THE</span>
<span class="s0"># WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.</span>


<span class="s2">import </span><span class="s1">locale</span>
<span class="s2">import </span><span class="s1">sys</span>

<span class="s2">from </span><span class="s1">PyQt5</span><span class="s3">.</span><span class="s1">QtCore </span><span class="s2">import </span><span class="s3">(</span><span class="s1">PYQT_VERSION_STR</span><span class="s3">, </span><span class="s1">QDir</span><span class="s3">, </span><span class="s1">QFile</span><span class="s3">, </span><span class="s1">QFileInfo</span><span class="s3">, </span><span class="s1">QIODevice</span><span class="s3">,</span>
        <span class="s1">QTextStream</span><span class="s3">)</span>

<span class="s2">from </span><span class="s3">.</span><span class="s1">pylupdate </span><span class="s2">import </span><span class="s3">*</span>


<span class="s2">def </span><span class="s1">printUsage</span><span class="s3">():</span>
    <span class="s1">sys</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span>
<span class="s4">&quot;Usage:</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;    pylupdate5 [options] project-file</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;    pylupdate5 [options] source-files -ts ts-files</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;Options:</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;    -help  Display this information and exit</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;    -version</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;           Display the version of pylupdate5 and exit</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;    -verbose</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;           Explain what is being done</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;    -noobsolete</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;           Drop all obsolete strings</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;    -tr-function name</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;           name() may be used instead of tr()</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;    -translate-function name</span><span class="s2">\n</span><span class="s4">&quot;</span>
<span class="s4">&quot;           name() may be used instead of translate()</span><span class="s2">\n</span><span class="s4">&quot;</span><span class="s3">)</span><span class="s1">;</span>


<span class="s2">def </span><span class="s1">updateTsFiles</span><span class="s3">(</span><span class="s1">fetchedTor</span><span class="s3">, </span><span class="s1">tsFileNames</span><span class="s3">, </span><span class="s1">codecForTr</span><span class="s3">, </span><span class="s1">noObsolete</span><span class="s3">, </span><span class="s1">verbose</span><span class="s3">):</span>
    <span class="s1">dir </span><span class="s3">= </span><span class="s1">QDir</span><span class="s3">()</span>

    <span class="s2">for </span><span class="s1">t </span><span class="s2">in </span><span class="s1">tsFileNames</span><span class="s3">:</span>
        <span class="s1">fn </span><span class="s3">= </span><span class="s1">dir</span><span class="s3">.</span><span class="s1">relativeFilePath</span><span class="s3">(</span><span class="s1">t</span><span class="s3">)</span>
        <span class="s1">tor </span><span class="s3">= </span><span class="s1">MetaTranslator</span><span class="s3">()</span>
        <span class="s1">out </span><span class="s3">= </span><span class="s1">MetaTranslator</span><span class="s3">()</span>

        <span class="s1">tor</span><span class="s3">.</span><span class="s1">load</span><span class="s3">(</span><span class="s1">t</span><span class="s3">)</span>

        <span class="s2">if </span><span class="s1">codecForTr</span><span class="s3">:</span>
            <span class="s1">tor</span><span class="s3">.</span><span class="s1">setCodec</span><span class="s3">(</span><span class="s1">codecForTr</span><span class="s3">)</span>

        <span class="s1">merge</span><span class="s3">(</span><span class="s1">tor</span><span class="s3">, </span><span class="s1">fetchedTor</span><span class="s3">, </span><span class="s1">out</span><span class="s3">, </span><span class="s1">noObsolete</span><span class="s3">, </span><span class="s1">verbose</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">)</span>

        <span class="s2">if </span><span class="s1">noObsolete</span><span class="s3">:</span>
            <span class="s1">out</span><span class="s3">.</span><span class="s1">stripObsoleteMessages</span><span class="s3">()</span>

        <span class="s1">out</span><span class="s3">.</span><span class="s1">stripEmptyContexts</span><span class="s3">()</span>

        <span class="s2">if not </span><span class="s1">out</span><span class="s3">.</span><span class="s1">save</span><span class="s3">(</span><span class="s1">t</span><span class="s3">):</span>
            <span class="s1">sys</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s4">&quot;pylupdate5 error: Cannot save '%s'</span><span class="s2">\n</span><span class="s4">&quot; </span><span class="s3">% </span><span class="s1">fn</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_encoded_path</span><span class="s3">(</span><span class="s1">path</span><span class="s3">):</span>
    <span class="s2">return </span><span class="s1">path</span><span class="s3">.</span><span class="s1">encode</span><span class="s3">(</span><span class="s1">locale</span><span class="s3">.</span><span class="s1">getdefaultlocale</span><span class="s3">()[</span><span class="s5">1</span><span class="s3">])</span>


<span class="s2">def </span><span class="s1">main</span><span class="s3">():</span>
    <span class="s0"># Initialise.</span>

    <span class="s1">defaultContext </span><span class="s3">= </span><span class="s4">&quot;@default&quot;</span>
    <span class="s1">fetchedTor </span><span class="s3">= </span><span class="s1">MetaTranslator</span><span class="s3">()</span>
    <span class="s1">codecForTr </span><span class="s3">= </span><span class="s4">''</span>
    <span class="s1">codecForSource </span><span class="s3">= </span><span class="s4">''</span>
    <span class="s1">tsFileNames </span><span class="s3">= []</span>
    <span class="s1">uiFileNames </span><span class="s3">= []</span>

    <span class="s1">verbose </span><span class="s3">= </span><span class="s2">False</span>
    <span class="s1">noObsolete </span><span class="s3">= </span><span class="s2">False</span>
    <span class="s1">metSomething </span><span class="s3">= </span><span class="s2">False</span>
    <span class="s1">numFiles </span><span class="s3">= </span><span class="s5">0</span>
    <span class="s1">standardSyntax </span><span class="s3">= </span><span class="s2">True</span>
    <span class="s1">metTsFlag </span><span class="s3">= </span><span class="s2">False</span>
    <span class="s1">tr_func </span><span class="s3">= </span><span class="s2">None</span>
    <span class="s1">translate_func </span><span class="s3">= </span><span class="s2">None</span>

    <span class="s0"># Parse the command line.</span>

    <span class="s2">for </span><span class="s1">arg </span><span class="s2">in </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">argv</span><span class="s3">[</span><span class="s5">1</span><span class="s3">:]:</span>
        <span class="s2">if </span><span class="s1">arg </span><span class="s3">== </span><span class="s4">&quot;-ts&quot;</span><span class="s3">:</span>
            <span class="s1">standardSyntax </span><span class="s3">= </span><span class="s2">False</span>

    <span class="s1">argc </span><span class="s3">= </span><span class="s1">len</span><span class="s3">(</span><span class="s1">sys</span><span class="s3">.</span><span class="s1">argv</span><span class="s3">)</span>
    <span class="s1">i </span><span class="s3">= </span><span class="s5">1</span>

    <span class="s2">while </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">argc</span><span class="s3">:</span>
        <span class="s1">arg </span><span class="s3">= </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">argv</span><span class="s3">[</span><span class="s1">i</span><span class="s3">]</span>
        <span class="s1">i </span><span class="s3">+= </span><span class="s5">1</span>

        <span class="s2">if </span><span class="s1">arg </span><span class="s3">== </span><span class="s4">&quot;-help&quot;</span><span class="s3">:</span>
            <span class="s1">printUsage</span><span class="s3">()</span>
            <span class="s1">sys</span><span class="s3">.</span><span class="s1">exit</span><span class="s3">(</span><span class="s5">0</span><span class="s3">)</span>

        <span class="s2">if </span><span class="s1">arg </span><span class="s3">== </span><span class="s4">&quot;-version&quot;</span><span class="s3">:</span>
            <span class="s1">sys</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s4">&quot;pylupdate5 v%s</span><span class="s2">\n</span><span class="s4">&quot; </span><span class="s3">% </span><span class="s1">PYQT_VERSION_STR</span><span class="s3">)</span>
            <span class="s1">sys</span><span class="s3">.</span><span class="s1">exit</span><span class="s3">(</span><span class="s5">0</span><span class="s3">)</span>

        <span class="s2">if </span><span class="s1">arg </span><span class="s3">== </span><span class="s4">&quot;-noobsolete&quot;</span><span class="s3">:</span>
            <span class="s1">noObsolete </span><span class="s3">= </span><span class="s2">True</span>
            <span class="s2">continue</span>

        <span class="s2">if </span><span class="s1">arg </span><span class="s3">== </span><span class="s4">&quot;-verbose&quot;</span><span class="s3">:</span>
            <span class="s1">verbose </span><span class="s3">= </span><span class="s2">True</span>
            <span class="s2">continue</span>

        <span class="s2">if </span><span class="s1">arg </span><span class="s3">== </span><span class="s4">&quot;-ts&quot;</span><span class="s3">:</span>
            <span class="s1">metTsFlag </span><span class="s3">= </span><span class="s2">True</span>
            <span class="s2">continue</span>

        <span class="s2">if </span><span class="s1">arg </span><span class="s3">== </span><span class="s4">&quot;-tr-function&quot;</span><span class="s3">:</span>
            <span class="s2">if </span><span class="s1">i </span><span class="s3">&gt;= </span><span class="s1">argc</span><span class="s3">:</span>
                <span class="s1">sys</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span>
                        <span class="s4">&quot;pylupdate5 error: missing -tr-function name</span><span class="s2">\n</span><span class="s4">&quot;</span><span class="s3">)</span>
                <span class="s1">sys</span><span class="s3">.</span><span class="s1">exit</span><span class="s3">(</span><span class="s5">2</span><span class="s3">)</span>

            <span class="s1">tr_func </span><span class="s3">= </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">argv</span><span class="s3">[</span><span class="s1">i</span><span class="s3">]</span>
            <span class="s1">i </span><span class="s3">+= </span><span class="s5">1</span>
            <span class="s2">continue</span>

        <span class="s2">if </span><span class="s1">arg </span><span class="s3">== </span><span class="s4">&quot;-translate-function&quot;</span><span class="s3">:</span>
            <span class="s2">if </span><span class="s1">i </span><span class="s3">&gt;= </span><span class="s1">argc</span><span class="s3">:</span>
                <span class="s1">sys</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span>
                        <span class="s4">&quot;pylupdate5 error: missing -translate-function name</span><span class="s2">\n</span><span class="s4">&quot;</span><span class="s3">)</span>
                <span class="s1">sys</span><span class="s3">.</span><span class="s1">exit</span><span class="s3">(</span><span class="s5">2</span><span class="s3">)</span>

            <span class="s1">translate_func </span><span class="s3">= </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">argv</span><span class="s3">[</span><span class="s1">i</span><span class="s3">]</span>
            <span class="s1">i </span><span class="s3">+= </span><span class="s5">1</span>
            <span class="s2">continue</span>

        <span class="s1">numFiles </span><span class="s3">+= </span><span class="s5">1</span>

        <span class="s1">fullText </span><span class="s3">= </span><span class="s4">&quot;&quot;</span>

        <span class="s2">if not </span><span class="s1">metTsFlag</span><span class="s3">:</span>
            <span class="s1">f </span><span class="s3">= </span><span class="s1">QFile</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">)</span>

            <span class="s2">if not </span><span class="s1">f</span><span class="s3">.</span><span class="s1">open</span><span class="s3">(</span><span class="s1">QIODevice</span><span class="s3">.</span><span class="s1">ReadOnly</span><span class="s3">):</span>
                <span class="s1">sys</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span>
                        <span class="s4">&quot;pylupdate5 error: Cannot open file '%s'</span><span class="s2">\n</span><span class="s4">&quot; </span><span class="s3">% </span><span class="s1">arg</span><span class="s3">)</span>
                <span class="s1">sys</span><span class="s3">.</span><span class="s1">exit</span><span class="s3">(</span><span class="s5">1</span><span class="s3">)</span>

            <span class="s1">t </span><span class="s3">= </span><span class="s1">QTextStream</span><span class="s3">(</span><span class="s1">f</span><span class="s3">)</span>
            <span class="s1">fullText </span><span class="s3">= </span><span class="s1">t</span><span class="s3">.</span><span class="s1">readAll</span><span class="s3">()</span>
            <span class="s1">f</span><span class="s3">.</span><span class="s1">close</span><span class="s3">()</span>

        <span class="s2">if </span><span class="s1">standardSyntax</span><span class="s3">:</span>
            <span class="s1">oldDir </span><span class="s3">= </span><span class="s1">QDir</span><span class="s3">.</span><span class="s1">currentPath</span><span class="s3">()</span>
            <span class="s1">QDir</span><span class="s3">.</span><span class="s1">setCurrent</span><span class="s3">(</span><span class="s1">QFileInfo</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">).</span><span class="s1">path</span><span class="s3">())</span>

            <span class="s1">fetchedTor </span><span class="s3">= </span><span class="s1">MetaTranslator</span><span class="s3">()</span>
            <span class="s1">codecForTr </span><span class="s3">= </span><span class="s4">''</span>
            <span class="s1">codecForSource </span><span class="s3">= </span><span class="s4">''</span>
            <span class="s1">tsFileNames </span><span class="s3">= []</span>
            <span class="s1">uiFileNames </span><span class="s3">= []</span>

            <span class="s2">for </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s2">in </span><span class="s1">proFileTagMap</span><span class="s3">(</span><span class="s1">fullText</span><span class="s3">).</span><span class="s1">items</span><span class="s3">():</span>
                <span class="s2">for </span><span class="s1">t </span><span class="s2">in </span><span class="s1">value</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s4">' '</span><span class="s3">):</span>
                    <span class="s2">if </span><span class="s1">key </span><span class="s3">== </span><span class="s4">&quot;SOURCES&quot;</span><span class="s3">:</span>
                        <span class="s1">fetchtr_py</span><span class="s3">(</span>
                                <span class="s1">_encoded_path</span><span class="s3">(</span>
                                        <span class="s1">QDir</span><span class="s3">.</span><span class="s1">current</span><span class="s3">().</span><span class="s1">absoluteFilePath</span><span class="s3">(</span><span class="s1">t</span><span class="s3">)),</span>
                                <span class="s1">fetchedTor</span><span class="s3">, </span><span class="s1">defaultContext</span><span class="s3">, </span><span class="s2">True</span><span class="s3">,</span>
                                <span class="s1">codecForSource</span><span class="s3">, </span><span class="s1">tr_func</span><span class="s3">, </span><span class="s1">translate_func</span><span class="s3">)</span>
                        <span class="s1">metSomething </span><span class="s3">= </span><span class="s2">True</span>

                    <span class="s2">elif </span><span class="s1">key </span><span class="s3">== </span><span class="s4">&quot;TRANSLATIONS&quot;</span><span class="s3">:</span>
                        <span class="s1">tsFileNames</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s1">QDir</span><span class="s3">.</span><span class="s1">current</span><span class="s3">().</span><span class="s1">absoluteFilePath</span><span class="s3">(</span><span class="s1">t</span><span class="s3">))</span>
                        <span class="s1">metSomething </span><span class="s3">= </span><span class="s2">True</span>

                    <span class="s2">elif </span><span class="s1">key </span><span class="s2">in </span><span class="s3">(</span><span class="s4">&quot;CODEC&quot;</span><span class="s3">, </span><span class="s4">&quot;DEFAULTCODEC&quot;</span><span class="s3">, </span><span class="s4">&quot;CODECFORTR&quot;</span><span class="s3">):</span>
                        <span class="s1">codecForTr </span><span class="s3">= </span><span class="s1">t</span>
                        <span class="s1">fetchedTor</span><span class="s3">.</span><span class="s1">setCodec</span><span class="s3">(</span><span class="s1">codecForTr</span><span class="s3">)</span>

                    <span class="s2">elif </span><span class="s1">key </span><span class="s3">== </span><span class="s4">&quot;CODECFORSRC&quot;</span><span class="s3">:</span>
                        <span class="s1">codecForSource </span><span class="s3">= </span><span class="s1">t</span>

                    <span class="s2">elif </span><span class="s1">key </span><span class="s3">== </span><span class="s4">&quot;FORMS&quot;</span><span class="s3">:</span>
                        <span class="s1">fetchtr_ui</span><span class="s3">(</span>
                                <span class="s1">_encoded_path</span><span class="s3">(</span>
                                        <span class="s1">QDir</span><span class="s3">.</span><span class="s1">current</span><span class="s3">().</span><span class="s1">absoluteFilePath</span><span class="s3">(</span><span class="s1">t</span><span class="s3">)),</span>
                                <span class="s1">fetchedTor</span><span class="s3">, </span><span class="s1">defaultContext</span><span class="s3">, </span><span class="s2">True</span><span class="s3">)</span>

            <span class="s1">updateTsFiles</span><span class="s3">(</span><span class="s1">fetchedTor</span><span class="s3">, </span><span class="s1">tsFileNames</span><span class="s3">, </span><span class="s1">codecForTr</span><span class="s3">, </span><span class="s1">noObsolete</span><span class="s3">,</span>
                    <span class="s1">verbose</span><span class="s3">)</span>

            <span class="s2">if not </span><span class="s1">metSomething</span><span class="s3">:</span>
                <span class="s1">sys</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span>
                        <span class="s4">&quot;pylupdate5 warning: File '%s' does not look like a &quot;</span>
                        <span class="s4">&quot;project file</span><span class="s2">\n</span><span class="s4">&quot; </span><span class="s3">% </span><span class="s1">arg</span><span class="s3">)</span>
            <span class="s2">elif </span><span class="s1">len</span><span class="s3">(</span><span class="s1">tsFileNames</span><span class="s3">) == </span><span class="s5">0</span><span class="s3">:</span>
                <span class="s1">sys</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span>
                        <span class="s4">&quot;pylupdate5 warning: Met no 'TRANSLATIONS' entry in &quot;</span>
                        <span class="s4">&quot;project file '%s'</span><span class="s2">\n</span><span class="s4">&quot; </span><span class="s3">% </span><span class="s1">arg</span><span class="s3">)</span>

            <span class="s1">QDir</span><span class="s3">.</span><span class="s1">setCurrent</span><span class="s3">(</span><span class="s1">oldDir</span><span class="s3">)</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s2">if </span><span class="s1">metTsFlag</span><span class="s3">:</span>
                <span class="s2">if </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">lower</span><span class="s3">().</span><span class="s1">endswith</span><span class="s3">(</span><span class="s4">&quot;.ts&quot;</span><span class="s3">):</span>
                    <span class="s1">fi </span><span class="s3">= </span><span class="s1">QFileInfo</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">)</span>

                    <span class="s2">if not </span><span class="s1">fi</span><span class="s3">.</span><span class="s1">exists</span><span class="s3">() </span><span class="s2">or </span><span class="s1">fi</span><span class="s3">.</span><span class="s1">isWritable</span><span class="s3">():</span>
                        <span class="s1">tsFileNames</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">)</span>
                    <span class="s2">else</span><span class="s3">:</span>
                        <span class="s1">sys</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span>
                                <span class="s4">&quot;pylupdate5 warning: For some reason, I &quot;</span>
                                <span class="s4">&quot;cannot save '%s'</span><span class="s2">\n</span><span class="s4">&quot; </span><span class="s3">% </span><span class="s1">arg</span><span class="s3">)</span>
                <span class="s2">else</span><span class="s3">:</span>
                    <span class="s1">sys</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span>
                            <span class="s4">&quot;pylupdate5 error: File '%s' lacks .ts extension</span><span class="s2">\n</span><span class="s4">&quot; </span><span class="s3">% </span><span class="s1">arg</span><span class="s3">)</span>
            <span class="s2">else</span><span class="s3">:</span>
                <span class="s1">fi </span><span class="s3">= </span><span class="s1">QFileInfo</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">)</span>
                <span class="s1">path </span><span class="s3">= </span><span class="s1">_encoded_path</span><span class="s3">(</span><span class="s1">fi</span><span class="s3">.</span><span class="s1">absoluteFilePath</span><span class="s3">())</span>

                <span class="s2">if </span><span class="s1">fi</span><span class="s3">.</span><span class="s1">suffix</span><span class="s3">() </span><span class="s2">in </span><span class="s3">(</span><span class="s4">&quot;py&quot;</span><span class="s3">, </span><span class="s4">&quot;pyw&quot;</span><span class="s3">):</span>
                    <span class="s1">fetchtr_py</span><span class="s3">(</span><span class="s1">path</span><span class="s3">, </span><span class="s1">fetchedTor</span><span class="s3">, </span><span class="s1">defaultContext</span><span class="s3">, </span><span class="s2">True</span><span class="s3">,</span>
                            <span class="s1">codecForSource</span><span class="s3">, </span><span class="s1">tr_func</span><span class="s3">, </span><span class="s1">translate_func</span><span class="s3">)</span>
                <span class="s2">else</span><span class="s3">:</span>
                    <span class="s1">fetchtr_ui</span><span class="s3">(</span><span class="s1">path</span><span class="s3">, </span><span class="s1">fetchedTor</span><span class="s3">, </span><span class="s1">defaultContext</span><span class="s3">, </span><span class="s2">True</span><span class="s3">)</span>

    <span class="s2">if not </span><span class="s1">standardSyntax</span><span class="s3">:</span>
        <span class="s1">updateTsFiles</span><span class="s3">(</span><span class="s1">fetchedTor</span><span class="s3">, </span><span class="s1">tsFileNames</span><span class="s3">, </span><span class="s1">codecForTr</span><span class="s3">, </span><span class="s1">noObsolete</span><span class="s3">, </span><span class="s1">verbose</span><span class="s3">)</span>

    <span class="s2">if </span><span class="s1">numFiles </span><span class="s3">== </span><span class="s5">0</span><span class="s3">:</span>
        <span class="s1">printUsage</span><span class="s3">()</span>
        <span class="s1">sys</span><span class="s3">.</span><span class="s1">exit</span><span class="s3">(</span><span class="s5">1</span><span class="s3">)</span>


<span class="s2">if </span><span class="s1">__name__ </span><span class="s3">== </span><span class="s4">'__main__'</span><span class="s3">:</span>
    <span class="s1">main</span><span class="s3">()</span>
</pre>
</body>
</html>